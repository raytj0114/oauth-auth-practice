name: Deploy to Render

on:
  push:
    branches: [main]
  workflow_dispatch: # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

jobs:
  deploy:
    runs-on: ubuntu-latest
    # CI ãŒæˆåŠŸã—ãŸå ´åˆã®ã¿ãƒ‡ãƒ—ãƒ­ã‚¤
    needs: [] # ä¾å­˜ã‚¸ãƒ§ãƒ–ãŒã‚ã‚Œã°æŒ‡å®š

    steps:
      - name: Trigger Render Deploy
        run: |
          if [ -z "${{ secrets.RENDER_DEPLOY_HOOK_URL }}" ]; then
            echo "âš ï¸ RENDER_DEPLOY_HOOK_URL is not set. Skipping deploy."
            echo "To enable auto-deploy, add the secret in GitHub repository settings."
            exit 0
          fi

          echo "ğŸš€ Triggering Render deploy..."
          curl -X POST "${{ secrets.RENDER_DEPLOY_HOOK_URL }}"
          echo "âœ… Deploy triggered successfully"
